(function(a){a.fn.mauGallery=function(e){e=a.extend(a.fn.mauGallery.defaults,e);var t=[];return this.each(function(){const l=a(this);a.fn.mauGallery.methods.createRowWrapper(l),e.lightBox&&a.fn.mauGallery.methods.createLightBox(l,e.lightboxId,e.navigation),a.fn.mauGallery.listeners(e),l.children(".gallery-item").each(function(){const l=a(this);a.fn.mauGallery.methods.responsiveImageItem(l),a.fn.mauGallery.methods.moveItemInRowWrapper(l),a.fn.mauGallery.methods.wrapItemInColumn(l,e.columns);var o=l.data("gallery-tag");e.showTags&&void 0!==o&&!t.includes(o)&&t.push(o)}),e.showTags&&a.fn.mauGallery.methods.showItemTags(l,e.tagsPosition,t),l.fadeIn(500)})},a.fn.mauGallery.defaults={columns:3,lightBox:!0,lightboxId:null,showTags:!0,tagsPosition:"bottom",navigation:!0},a.fn.mauGallery.listeners=function(e){a(".gallery-item").on("click",function(){const t=a(this);e.lightBox&&"IMG"===t.prop("tagName")&&a.fn.mauGallery.methods.openLightBox(t,e.lightboxId)}),a(".gallery").on("click",".nav-link",a.fn.mauGallery.methods.filterByTag),a(".gallery").on("click",".mg-prev",()=>a.fn.mauGallery.methods.prevImage(e.lightboxId)),a(".gallery").on("click",".mg-next",()=>a.fn.mauGallery.methods.nextImage(e.lightboxId))},a.fn.mauGallery.methods={createRowWrapper(a){a.children().first().hasClass("row")||a.append('<div class="gallery-items-row row"></div>')},wrapItemInColumn(a,e){let t="";if("number"==typeof e)t=`col-${Math.ceil(12/e)}`;else{if("object"!=typeof e)return void console.error(`Invalid columns type: ${typeof e}. Expected number or object.`);t=Object.entries(e).map(([a,e])=>`col-${a}-${Math.ceil(12/e)}`).join(" ")}a.wrap(`<div class='item-column mb-4 ${t}'></div>`)},moveItemInRowWrapper(a){a.appendTo(".gallery-items-row")},responsiveImageItem(a){"IMG"===a.prop("tagName")&&a.addClass("img-fluid")},openLightBox(e,t){a(`#${t}`).find(".lightboxImage").attr("src",e.attr("src")),a(`#${t}`).modal("toggle")},prevImage(e){a.fn.mauGallery.methods.navigateLightboxImage(e,-1)},nextImage(e){a.fn.mauGallery.methods.navigateLightboxImage(e,1)},navigateLightboxImage(e,t){const l=a(`#${e}`).find(".lightboxImage").attr("src"),o=a(".tags-bar .active-tag").data("images-toggle"),n=a.fn.mauGallery.methods.getImagesCollection(o),i=n.findIndex(a=>a.attr("src")===l),s=(i+t+n.length)%n.length;a(`#${e}`).find(".lightboxImage").attr("src",n[s].attr("src"))},getImagesCollection(e){const t=[];return a(".gallery .item-column").each(function(){const l=a(this).children("img");"all"!==e&&l.data("gallery-tag")!==e||t.push(l)}),t},createLightBox(a,e,t){const l=t?'<div class="mg-prev" style="cursor:pointer;position:absolute;top:50%;left:-15px;background:white;">&lt;</div>\n           <div class="mg-next" style="cursor:pointer;position:absolute;top:50%;right:-15px;background:white;">&gt;</div>':"";a.append(`\n        <div class="modal fade" id="${e||"galleryLightbox"}" tabindex="-1" role="dialog" aria-hidden="true">\n          <div class="modal-dialog" role="document">\n            <div class="modal-content">\n              <div class="modal-body">\n                ${l}\n                <img class="lightboxImage img-fluid" alt="Image displayed in the lightbox"/>\n              </div>\n            </div>\n          </div>\n        </div>\n      `)},showItemTags(a,e,t){const l=t.map(a=>`<li class="nav-item"><span class="nav-link" data-images-toggle="${a}">${a}</span></li>`).join(""),o=`<ul class="my-4 tags-bar nav nav-pills"><li class="nav-item"><span class="nav-link active active-tag" data-images-toggle="all">Tous</span></li>${l}</ul>`;"bottom"===e?a.append(o):"top"===e?a.prepend(o):console.error(`Invalid tags position: ${e}. Expected "top" or "bottom".`)},filterByTag(){const e=a(this);if(e.hasClass("active-tag"))return;a(".tags-bar .active-tag").removeClass("active active-tag"),e.addClass("active-tag");const t=e.data("images-toggle");a(".gallery-item").each(function(){const e=a(this).parents(".item-column");"all"===t||a(this).data("gallery-tag")===t?e.show(300):e.hide()})}}})(jQuery);